{
  "version": 3,
  "sources": ["../../react-image/esm/Img.js", "../../react-image/esm/useImage-65024c8f.js", "../../react-image/esm/index.js"],
  "sourcesContent": ["import _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport _objectWithoutPropertiesLoose from '@babel/runtime/helpers/objectWithoutPropertiesLoose';\nimport React from 'react';\nimport { i as imagePromiseFactory, u as useImage } from './useImage-65024c8f.js';\n\nvar _excluded = [\"decode\", \"src\", \"loader\", \"unloader\", \"container\", \"loaderContainer\", \"unloaderContainer\", \"imgPromise\", \"crossorigin\", \"useSuspense\"];\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nvar passthroughContainer = function passthroughContainer(x) {\n  return x;\n};\nfunction Img(_ref) {\n  var _ref$decode = _ref.decode,\n    decode = _ref$decode === void 0 ? true : _ref$decode,\n    _ref$src = _ref.src,\n    srcList = _ref$src === void 0 ? [] : _ref$src,\n    _ref$loader = _ref.loader,\n    loader = _ref$loader === void 0 ? null : _ref$loader,\n    _ref$unloader = _ref.unloader,\n    unloader = _ref$unloader === void 0 ? null : _ref$unloader,\n    _ref$container = _ref.container,\n    container = _ref$container === void 0 ? passthroughContainer : _ref$container,\n    _ref$loaderContainer = _ref.loaderContainer,\n    loaderContainer = _ref$loaderContainer === void 0 ? passthroughContainer : _ref$loaderContainer,\n    _ref$unloaderContaine = _ref.unloaderContainer,\n    unloaderContainer = _ref$unloaderContaine === void 0 ? passthroughContainer : _ref$unloaderContaine,\n    imgPromise = _ref.imgPromise,\n    crossorigin = _ref.crossorigin,\n    _ref$useSuspense = _ref.useSuspense,\n    useSuspense = _ref$useSuspense === void 0 ? false : _ref$useSuspense,\n    imgProps = _objectWithoutPropertiesLoose(_ref, _excluded);\n  imgPromise = imgPromise || imagePromiseFactory({\n    decode: decode,\n    crossOrigin: crossorigin\n  });\n  var _useImage = useImage({\n      srcList: srcList,\n      imgPromise: imgPromise,\n      useSuspense: useSuspense\n    }),\n    src = _useImage.src,\n    isLoading = _useImage.isLoading;\n  // console.log({src, isLoading, resolvedSrc, useSuspense})\n  // show img if loaded\n  if (src) return container( /*#__PURE__*/React.createElement(\"img\", _objectSpread({\n    src: src\n  }, imgProps)));\n  // show loader if we have one and were still trying to load image\n  if (!useSuspense && isLoading) return loaderContainer(loader);\n  // show unloader if we have one and we have no more work to do\n  if (!useSuspense && unloader) return unloaderContainer(unloader);\n  return null;\n}\n\nexport { Img as default };\n//# sourceMappingURL=Img.js.map\n", "import _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport { useState } from 'react';\n\n// returns a Promisized version of Image() api\nvar imagePromiseFactory = (function (_ref) {\n  var _ref$decode = _ref.decode,\n    decode = _ref$decode === void 0 ? true : _ref$decode,\n    _ref$crossOrigin = _ref.crossOrigin,\n    crossOrigin = _ref$crossOrigin === void 0 ? '' : _ref$crossOrigin;\n  return function (src) {\n    return new Promise(function (resolve, reject) {\n      var i = new Image();\n      if (crossOrigin) i.crossOrigin = crossOrigin;\n      i.onload = function () {\n        decode && i.decode ? i.decode().then(resolve)[\"catch\"](reject) : resolve();\n      };\n      i.onerror = reject;\n      i.src = src;\n    });\n  };\n});\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nvar removeBlankArrayElements = function removeBlankArrayElements(a) {\n  return a.filter(function (x) {\n    return x;\n  });\n};\nvar stringToArray = function stringToArray(x) {\n  return Array.isArray(x) ? x : [x];\n};\nvar cache = {};\n// sequential map.find for promises\nvar promiseFind = function promiseFind(arr, promiseFactory) {\n  var done = false;\n  return new Promise(function (resolve, reject) {\n    var queueNext = function queueNext(src) {\n      return promiseFactory(src).then(function () {\n        done = true;\n        resolve(src);\n      });\n    };\n    arr.reduce(function (p, src) {\n      // ensure we aren't done before enqueuing the next source\n      return p[\"catch\"](function () {\n        if (!done) return queueNext(src);\n      });\n    }, queueNext(arr.shift()))[\"catch\"](reject);\n  });\n};\nfunction useImage(_ref) {\n  var srcList = _ref.srcList,\n    _ref$imgPromise = _ref.imgPromise,\n    imgPromise = _ref$imgPromise === void 0 ? imagePromiseFactory({\n      decode: true\n    }) : _ref$imgPromise,\n    _ref$useSuspense = _ref.useSuspense,\n    useSuspense = _ref$useSuspense === void 0 ? true : _ref$useSuspense;\n  var _useState = useState(false),\n    setIsSettled = _useState[1];\n  var sourceList = removeBlankArrayElements(stringToArray(srcList));\n  var sourceKey = sourceList.join('');\n  if (!cache[sourceKey]) {\n    // create promise to loop through sources and try to load one\n    cache[sourceKey] = {\n      promise: promiseFind(sourceList, imgPromise),\n      cache: 'pending',\n      error: null\n    };\n  }\n  // when promise resolves/reject, update cache & state\n  if (cache[sourceKey].cache === 'resolved') {\n    return {\n      src: cache[sourceKey].src,\n      isLoading: false,\n      error: null\n    };\n  }\n  if (cache[sourceKey].cache === 'rejected') {\n    if (useSuspense) throw cache[sourceKey].error;\n    return {\n      isLoading: false,\n      error: cache[sourceKey].error,\n      src: undefined\n    };\n  }\n  cache[sourceKey].promise\n  // if a source was found, update cache\n  // when not using suspense, update state to force a rerender\n  .then(function (src) {\n    cache[sourceKey] = _objectSpread(_objectSpread({}, cache[sourceKey]), {}, {\n      cache: 'resolved',\n      src: src\n    });\n    if (!useSuspense) setIsSettled(sourceKey);\n  })\n  // if no source was found, or if another error occurred, update cache\n  // when not using suspense, update state to force a rerender\n  [\"catch\"](function (error) {\n    cache[sourceKey] = _objectSpread(_objectSpread({}, cache[sourceKey]), {}, {\n      cache: 'rejected',\n      error: error\n    });\n    if (!useSuspense) setIsSettled(sourceKey);\n  });\n  // cache[sourceKey].cache === 'pending')\n  if (useSuspense) throw cache[sourceKey].promise;\n  return {\n    isLoading: true,\n    src: undefined,\n    error: null\n  };\n}\n\nexport { imagePromiseFactory as i, useImage as u };\n//# sourceMappingURL=useImage-65024c8f.js.map\n", "export { default as Img } from './Img.js';\nexport { u as useImage } from './useImage-65024c8f.js';\nimport '@babel/runtime/helpers/defineProperty';\nimport '@babel/runtime/helpers/objectWithoutPropertiesLoose';\nimport 'react';\n//# sourceMappingURL=index.js.map\n"],
  "mappings": "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",
  "names": ["import_react", "removeBlankArrayElements", "stringToArray", "promiseFind", "queueNext", "ownKeys", "_objectSpread", "passthroughContainer", "React", "import_react"]
}
